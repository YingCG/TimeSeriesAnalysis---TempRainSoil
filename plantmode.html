<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Plant Data Visualization</title>
    <script src="https://cdn.plot.ly/plotly-latest.min.js"></script> 
</head>
<body  style="background-color: black; color:#91DDCF; height: 100vh; margin: 0; padding: 0.5rem">
    <div style="display: flex; align-items: center; padding: 1rem">
        <div style="width: 70%; ">
            <div id="plant-info" >
                <!-- Plant information will be loaded here -->
            </div>
            <div id="chart" style="height: 700px; filter: invert(100%); " ></div>
        </div>
        <img style="width: 30%; padding-right: 3rem; opacity: 0.5; filter: invert(100% ); margin: 0;" src="https://d2w9rnfcy7mm78.cloudfront.net/2985683/original_78135efac5c6637298965deebe00ad33.gif?1541383125?bc=1" alt="Agathis-australis_Kauri">
    </div>
    <footer style="text-align: center; color: dimgray; ">Presentation by Ying Chiu Goh</footer>

    <script>
        Plotly.d3.csv('./predicted_data.csv', function(err, data) {
            if (err) {
                console.error("Error loading CSV file:", err);
                return;
            }
            
            // Extract data
            var dates = data.map(function(d) { return d.Date; });
            var predictedRain = data.map(function(d) { return +d['Predicted Rain(mm)']; });
            var predictedSoilMoist = data.map(function(d) { return +d['Predicted SoilMoist']; });
            var predictedSoilTemp = data.map(function(d) { return +d['Predicted SoilTemp']; });
            var SMD = data.map(function(d) { return +d['SMD']; });
            var droughtCondition = data.map(function(d) { return d['Drought Condition']; });
            var scientificName = data.map(function(d) { return d['Scientific Name']; });
            var growthForm = data.map(function(d) { return d['Growth Form and Habit']; });
            var threatStatus = data.map(function(d) { return d['Threat Status']; });
            var climateImpact = data.map(function(d) { return d['Climate Change Impact']; });
            var ecosystemType = data.map(function(d) { return d['Ecosystem type']; });
            var iucnThreatRank = data.map(function(d) { return d['IUCN THREAT RANK']; });
            var climateChangeRisk = data.map(function(d) { return d['risk of negative climate change effects']; });
            var habitatDistribution = data.map(function(d) { return d['Habitat type and distribution in New Zealand']; });

            // Plot with Plotly.js
            var trace1 = {
                x: dates,
                y: predictedRain,
                text: dates.map(function(d, i) {
                    return `Date: ${d}<br>Predicted Rain: ${predictedRain[i]}<br>Predicted Soil Moisture: ${predictedSoilMoist[i]}<br>Predicted Soil Temperature: ${predictedSoilTemp[i]}<br>SMD: ${SMD[i]}<br>Drought Condition: ${droughtCondition[i]}`;
                }),
                hoverinfo: 'text',
                mode: 'lines+markers',
                name: 'Predicted Rain(mm)'
            };

            var trace2 = {
                x: dates,
                y: predictedSoilMoist,
                text: dates.map(function(d, i) {
                    return `Date: ${d}<br>Predicted Rain: ${predictedRain[i]}<br>Predicted Soil Moisture: ${predictedSoilMoist[i]}<br>Predicted Soil Temperature: ${predictedSoilTemp[i]}<br>SMD: ${SMD[i]}<br>Drought Condition: ${droughtCondition[i]}`;
                }),
                hoverinfo: 'text',
                mode: 'lines+markers',
                name: 'Predicted SoilMoist'
            };

            var trace3 = {
                x: dates,
                y: predictedSoilTemp,
                text: dates.map(function(d, i) {
                    return `Date: ${d}<br>Predicted Rain: ${predictedRain[i]}<br>Predicted Soil Moisture: ${predictedSoilMoist[i]}<br>Predicted Soil Temperature: ${predictedSoilTemp[i]}<br>SMD: ${SMD[i]}<br>Drought Condition: ${droughtCondition[i]}`;
                }),
                hoverinfo: 'text',
                mode: 'lines+markers',
                name: 'Predicted SoilTemp'
            };

            var layout = {
                title: 'Predicted Data',
                xaxis: {
                    title: 'Date'
                },
                yaxis: {
                    title: 'Values'
                }
            };

            var dataPlot = [trace1, trace2, trace3];

            Plotly.newPlot('chart', dataPlot, layout);


            // Load plant information
            var plantInfo = {
                scientificName: data[0]['Scientific Name'],
                growthForm: data[0]['Growth Form and Habit'],
                threatStatus: data[0]['Threat Status'],
                climateChangeImpact: data[0]['Climate Change Impact']
            };

            var plantInfoHTML = `
                <h1>Predicted Data for Plant: ${plantInfo.scientificName}</h1>
                <p>
                    <strong>Scientific Name:</strong> ${plantInfo.scientificName}<br>
                    <strong>Growth Form and Habit:</strong> ${plantInfo.growthForm}<br>
                    <strong>Threat Status:</strong> ${plantInfo.threatStatus}<br>
                    <strong>Climate Change Impact:</strong> ${plantInfo.climateChangeImpact}                    
                </p>
            `;

            document.getElementById('plant-info').innerHTML = plantInfoHTML;
        });
    </script>
</body>
</html>
